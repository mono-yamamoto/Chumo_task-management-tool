#!/bin/sh
# Check if gitleaks is installed
if ! command -v gitleaks >/dev/null 2>&1; then
  echo "Warning: gitleaks is not installed. Skipping secret check."
  echo "Install gitleaks with: brew install gitleaks"
  exit 0
fi

echo "Running gitleaks..."
gitleaks protect --staged
if [ $? -ne 0 ]; then
  echo "gitleaks: 機密情報が含まれています。コミットを中止します。"
  exit 1
fi

